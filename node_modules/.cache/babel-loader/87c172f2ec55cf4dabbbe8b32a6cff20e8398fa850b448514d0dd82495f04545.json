{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* global google */\n// export default {\n//   methods: {\n//     logout() {\n//       localStorage.removeItem('token');\n//       this.$router.push('/'); // redirect to the login page\n//     }\n//   }\n// }\n// import * as THREE from 'three';\n\nimport LoginView from '@/components/LoginView.vue';\nexport default {\n  data() {\n    return {\n      isLargeScreen: true,\n      hideBottomNav: false,\n      scrollTimer: null,\n      prevScrollY: 0,\n      showLoginModal: false,\n      confirmationModalIndex: null,\n      map: null,\n      locations: [],\n      data: [{\n        service: 'Service 1',\n        date: 'Date 1',\n        location: 'Location 1',\n        volunteers: 'Volunteers 1'\n      }\n      // add more data as needed...\n      ],\n\n      viewModalIndex: null,\n      signupModalIndex: null,\n      isMenuOpen: false\n    };\n  },\n  created() {\n    fetch('http://localhost:8000/api/current-user/', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${this.userToken}` // Pass the user's auth token\n      }\n    }).then(response => response.json()).then(data => {\n      this.userID = data.id;\n      console.log(this.userID);\n    }).catch(error => console.error('Error:', error));\n  },\n  mounted() {\n    this.$nextTick(() => {\n      window.initMap = this.initMap;\n      this.initMap();\n    });\n    window.addEventListener('resize', this.handleScreenResize);\n    this.handleScreenResize();\n    window.addEventListener('scroll', this.handleScroll);\n\n    // Fetch locations from the API\n    fetch('http://localhost:8000/api/locations/').then(response => response.json()).then(data => {\n      // Save the locations in your component's data\n      this.locations = data;\n      // Add markers to the map for each location\n      this.locations.forEach(location => {\n        new google.maps.Marker({\n          position: {\n            lat: location.latitude,\n            lng: location.longitude\n          },\n          map: this.map\n        });\n      });\n    });\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.handleScreenResize);\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  methods: {\n    initMap() {\n      this.map = new google.maps.Map(document.getElementById('map'), {\n        center: {\n          lat: 32.7767,\n          lng: -96.7970\n        },\n        zoom: 8\n      });\n    },\n    getCurrentLocations() {\n      // Fetch locations from the API\n      fetch('http://localhost:8000/api/locations/').then(response => response.json()).then(data => {\n        // Save the locations in your component's data\n        this.locations = data;\n        // Add markers to the map for each location\n        this.locations.forEach(location => {\n          new google.maps.Marker({\n            position: {\n              lat: location.latitude,\n              lng: location.longitude\n            },\n            map: this.map\n          });\n        });\n      });\n    },\n    logout() {\n      localStorage.removeItem('token');\n      this.$router.push('/'); // redirect to the login page\n    },\n\n    handleScreenResize() {\n      this.isLargeScreen = window.innerWidth >= 768;\n      this.hideBottomNav = window.innerWidth >= 768;\n    },\n    handleScroll() {\n      clearTimeout(this.scrollTimer);\n      if (window.pageYOffset > this.prevScrollY || window.innerWidth >= 768) {\n        // Scrolling down\n        this.hideBottomNav = true;\n      } else {\n        // Scrolling up\n        this.hideBottomNav = false;\n      }\n      this.prevScrollY = window.pageYOffset;\n\n      // Set a timeout to hide the bottom nav after 5 seconds of scroll inactivity\n      this.scrollTimer = setTimeout(() => {\n        this.hideBottomNav = true;\n      }, 5000);\n    },\n    openLoginModal() {\n      this.showLoginModal = true;\n    },\n    closeLoginModal() {\n      this.showLoginModal = false;\n    },\n    openViewModal(index) {\n      this.viewModalIndex = index;\n    },\n    closeViewModal() {\n      this.viewModalIndex = null;\n    },\n    openSignupModal(index) {\n      this.signupModalIndex = index;\n    },\n    closeSignupModal() {\n      this.signupModalIndex = null;\n    },\n    confirmService(index) {\n      this.confirmationModalIndex = index;\n      this.closeSignupModal();\n    },\n    closeConfirmationModal() {\n      this.confirmationModalIndex = null;\n    },\n    signupForLocation(index) {\n      const location = this.locations[index];\n      console.log(location);\n      fetch(`http://localhost:8000/api/locations/${location.id}/`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          ...location,\n          volunteers: location.volunteers + 1\n        })\n      }).then(response => response.json()).then(data => {\n        if (data.status === 'success') {\n          const updatedLocation = data.location;\n          this.locations.splice(index, 1, updatedLocation);\n          this.signupForService(index);\n          // close the signup modal\n          this.closeSignupModal();\n          // open the confirmation modal\n          this.confirmService(index);\n        } else {\n          console.error('Error:', data.error);\n        }\n      }).catch(error => console.error('Error:', error));\n    },\n    signupForService(index) {\n      const location = this.locations[index];\n      console.log(\"HERE \" + JSON.stringify(location.id));\n      fetch('http://localhost:8000/api/servicesignup/', {\n        // Adjust the URL as necessary\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Token ${this.userToken}` // Pass the user's auth token\n        },\n\n        body: JSON.stringify({\n          user: this.userID,\n          // Pass the user's ID\n          service: location // Pass the ID of the service the user is signing up for\n        })\n      }).then(response => response.json()).then(data => {\n        // Handle the response data as necessary\n        console.log(data);\n      }).catch(error => console.error('Error:', error));\n    }\n  },\n  components: {\n    LoginView\n  }\n};","map":{"version":3,"names":["LoginView","data","isLargeScreen","hideBottomNav","scrollTimer","prevScrollY","showLoginModal","confirmationModalIndex","map","locations","service","date","location","volunteers","viewModalIndex","signupModalIndex","isMenuOpen","created","fetch","method","headers","userToken","then","response","json","userID","id","console","log","catch","error","mounted","$nextTick","window","initMap","addEventListener","handleScreenResize","handleScroll","forEach","google","maps","Marker","position","lat","latitude","lng","longitude","beforeUnmount","removeEventListener","methods","Map","document","getElementById","center","zoom","getCurrentLocations","logout","localStorage","removeItem","$router","push","innerWidth","clearTimeout","pageYOffset","setTimeout","openLoginModal","closeLoginModal","openViewModal","index","closeViewModal","openSignupModal","closeSignupModal","confirmService","closeConfirmationModal","signupForLocation","body","JSON","stringify","status","updatedLocation","splice","signupForService","user","components"],"sources":["C:\\Users\\burge\\OneDrive\\Desktop\\mh_py\\frontend\\src\\components\\ProtectedView.vue"],"sourcesContent":["<template>\r\n  <div class=\"side-nav-bg-overflow flex flex-col min-h-screen\">\r\n    <!-- <div class=\"w-full nav h-24 flex justify-between items-center\">\r\n      <div class=\"w-full flex justify-center mr-12 flex space-x-4\">\r\n        <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Home</a>\r\n        <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">News</a>\r\n        <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Community</a>\r\n        <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Partnerships</a>\r\n        <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Volunteer</a>\r\n        <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Messages</a>\r\n        <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Notifications</a>\r\n      </div>\r\n      <div class=\"mr-12\">\r\n        <button @click=\"logout\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">\r\n          Logout\r\n        </button>\r\n      </div>\r\n    </div> -->\r\n\r\n  <div class=\"w-full nav h-24 flex justify-between items-center\">\r\n    <div class=\"w-full flex justify-center mr-12 flex space-x-4 desktop-nav\">\r\n      <button @click=\"isMenuOpen = !isMenuOpen\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">\r\n        Menu\r\n      </button>\r\n      <div v-if=\"isMenuOpen\" class=\"dropdown-menu\">\r\n        <a href=\"#\" class=\"dropdown-item\">Home</a>\r\n        <a href=\"#\" class=\"dropdown-item\">News</a>\r\n        <a href=\"#\" class=\"dropdown-item\">Community</a>\r\n        <a href=\"#\" class=\"dropdown-item\">Partnerships</a>\r\n        <a href=\"#\" class=\"dropdown-item\">Volunteer</a>\r\n        <a href=\"#\" class=\"dropdown-item\">Messages</a>\r\n        <a href=\"#\" class=\"dropdown-item\">Notifications</a>\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full flex justify-center mr-12 flex space-x-4 mobile-nav\">\r\n      <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Home</a>\r\n      <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">News</a>\r\n      <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Community</a>\r\n      <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Partnerships</a>\r\n      <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Volunteer</a>\r\n      <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Messages</a>\r\n      <a href=\"#\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">Notifications</a>\r\n    </div>\r\n    <div class=\"mr-12\">\r\n      <button @click=\"logout\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">\r\n        Logout\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n    <div class=\"flex w-full flex-grow\">\r\n      <!-- Side Navigation Bar -->\r\n      <div v-if=\"isLargeScreen\" class=\"w-48 h-screen side-nav bg-cyan-100 p-4\">\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Profile</a>\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Retreats</a>\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Journals</a>\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Challenges</a>\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Event Calendar</a>\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Volunteer History</a>\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Settings</a>\r\n        <a href=\"#\" class=\" my-6 block py-2 px-4 font-semibold rounded-lg shadow-md text-black bg-sky-200 hover:bg-sky-500 hover:text-white\">Support</a>\r\n      </div>\r\n\r\n      <!-- Main content area with three sections -->\r\n      <div class=\"w-full flex flex-col bg-green-50\" @scroll=\"handleScroll\">\r\n        <!-- Top div -->\r\n  <div class=\"w-full main-bg p-4\">\r\n    <div id=\"map\" style=\"width: 100%; height: 400px;\"></div>\r\n          <div class=\"w-full sm:w-full custom-sky p-5 mt-4\">\r\n            \r\n            <div class=\"w-full sm:w-full bg-blue-200 p-5 mt-4\">\r\n              \r\n              <div class=\"mt-6 w-full h-12 flex justify-center items-center\">\r\n                <h2 class=\"text-8xl text-white\" style=\"font-family: 'Kaushan Script', cursive;\">Upcoming Services</h2>\r\n              </div>\r\n\r\n              <table class=\"styled-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Service</th>\r\n                        <th>Description</th> <!-- New field -->\r\n                        <th>Location</th>\r\n                        \r\n                        <th>Date</th>\r\n                        \r\n                        \r\n                        <th>Meeting Time</th> <!-- New field -->\r\n                        <th>Volunteers</th>\r\n                        <th>View</th>\r\n                        <th>Sign-up</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(location, index) in locations\" :key=\"index\">\r\n                        <td data-label=\"Service\">{{ location.service }}</td>\r\n                        <td data-label=\"Service Description\">{{ location.service_description }}</td> <!-- New field -->\r\n\r\n                        <td data-label=\"Location\">{{ location.place_name }}</td>\r\n\r\n                        <td data-label=\"Date\">{{ new Date(location.date).toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: 'numeric' }) }}</td>\r\n                        <td data-label=\"Meeting Time\">{{ location.meeting_time }}</td> <!-- New field -->\r\n                        <td data-label=\"Volunteers\">{{ location.volunteers }}</td> <!-- Updated to use the volunteers field -->\r\n\r\n                        <td data-label=\"View\">\r\n                            <button @click=\"openViewModal(index)\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-green-500 hover:bg-green-700\">\r\n                                View\r\n                            </button>\r\n                        </td>\r\n                        <td data-label=\"Sign-up\">\r\n                            <button @click=\"openSignupModal(index)\" class=\"w-fit py-2 px-4 text-xs font-semibold rounded-lg shadow-md text-white bg-blue-500 hover:bg-blue-700\">\r\n                                Sign up\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n\r\n\r\n\r\n\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n  </div>\r\n\r\n        <!-- Middle div with three divs side by side -->\r\n        <div class=\"w-full flex flex-wrap justify-between bg-red-200 p-4\">\r\n          <div class=\"w-full sm:w-1/3 bg-blue-200 p-4\">\r\n            <p>Middle left content goes here</p>\r\n          </div>\r\n          <div class=\"w-full sm:w-1/3 bg-green-200 p-4\">\r\n            <p>Middle center content goes here</p>\r\n          </div>\r\n          <div class=\"w-full sm:w-1/3 bg-purple-200 p-4\">\r\n            <p>Middle right content goes here</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Bottom div with two divs side by side -->\r\n        <div class=\"w-full flex flex-wrap justify-between bg-orange-200 p-4\">\r\n          <div class=\"w-full sm:w-1/2 bg-pink-200 p-4\">\r\n            <p>Bottom left ddnt goes here</p>\r\n          </div>\r\n          <div class=\"w-full sm:w-1/2 bg-teal-200 p-4\">\r\n            <p>Bottom right content goes here</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      class=\"h-24 bottom-nav fixed bottom-0 w-screen flex justify-between items-center\"\r\n      :class=\"{ 'hidden': hideBottomNav }\"\r\n    >\r\n\r\n        <button @click=\"logout\" class=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-sky-500 hover:bg-sky-700\">\r\n          Logout\r\n        </button>\r\n\r\n    </div>\r\n\r\n    <div v-if=\"showLoginModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n      <div class=\"bg-white w-1/2 h-1/2 rounded p-4\">\r\n        <LoginView @close=\"closeLoginModal\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n\r\n<div v-if=\"viewModalIndex !== null && locations[viewModalIndex]\" class=\"fixed inset-0 flex items-center justify-center\">\r\n  <div class=\"fixed inset-0 bg-black bg-opacity-50\"></div>\r\n  <div class=\"absolute w-1/2 mx-auto my-auto bg-white rounded-lg shadow-lg\">\r\n    <div class=\"p-4\">\r\n      <div class=\"flex justify-between\">\r\n        <h2 class=\"text-xl font-semibold\">Location Details</h2>\r\n        <button @click=\"closeViewModal\" class=\"text-gray-600 hover:text-gray-800\">\r\n          <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <hr class=\"my-4\">\r\n      <p><span class=\"font-semibold\">Service:</span> {{ locations[viewModalIndex].service }}</p>\r\n      <p><span class=\"font-semibold\">Description:</span> {{ locations[viewModalIndex].service_description }}</p>\r\n      <p><span class=\"font-semibold\">Location:</span> {{ locations[viewModalIndex].place_name }}</p>\r\n      <p><span class=\"font-semibold\">Date:</span> {{ new Date(locations[viewModalIndex].date).toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: 'numeric' }) }}</p>\r\n      <p><span class=\"font-semibold\">Meeting Time:</span> {{ locations[viewModalIndex].meeting_time }}</p>\r\n      <p><span class=\"font-semibold\">Volunteers:</span> {{ locations[viewModalIndex].volunteers }}</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n  <!-- Confirmation Modal -->\r\n  <div v-if=\"confirmationModalIndex !== null && locations[confirmationModalIndex]\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n    <div class=\"bg-white w-3/4 mx-auto rounded-lg p-8\">\r\n      <div class=\"flex justify-between items-center mb-4\">\r\n        <h2 class=\"text-2xl font-bold\"><strong>Success!</strong> Service Sign Up</h2>\r\n        <button @click=\"closeConfirmationModal\" class=\"text-gray-500 hover:text-gray-700\">\r\n          <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <p class=\"text-lg mb-6\">You have successfully signed up for {{ locations[confirmationModalIndex].service }}</p>\r\n      <p class=\"text-lg mb-6\">Service Description: {{ locations[confirmationModalIndex].service_description }}</p>\r\n      <p class=\"text-lg mb-6\">Location: {{ locations[confirmationModalIndex].place_name }}</p>\r\n      <p class=\"text-lg mb-6\">Date: {{ new Date(locations[confirmationModalIndex].date).toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: 'numeric' }) }}</p>\r\n      <p class=\"text-lg mb-6\">Meeting Time: {{ locations[confirmationModalIndex].meeting_time }}</p>\r\n      <p class=\"text-lg mb-6\">Number of Volunteers: {{ locations[confirmationModalIndex].volunteers }}</p>\r\n      <!-- Add more details as needed -->\r\n    </div>\r\n  </div>\r\n\r\n  <!-- sign up modal -->\r\n  <div v-if=\"signupModalIndex !== null && locations[signupModalIndex]\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n    <div class=\"bg-white w-3/4 mx-auto rounded-lg p-8\">\r\n      <div class=\"flex justify-between items-center mb-4\">\r\n        <h2 class=\"text-2xl font-bold\"><strong>Confirm</strong> Sign Up</h2>\r\n        <button @click=\"closeSignupModal\" class=\"text-gray-500 hover:text-gray-700\">\r\n          <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <p class=\"text-lg mb-6\">Signing up for {{ locations[signupModalIndex].service }}</p>\r\n      <button @click=\"signupForLocation(signupModalIndex)\" class=\"w-full py-3 px-6 font-semibold rounded-lg shadow-md text-white bg-blue-500 hover:bg-blue-700\">\r\n        Sign Up\r\n      </button>\r\n      <!-- Add more content to the modal as needed -->\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n/* global google */\r\n// export default {\r\n//   methods: {\r\n//     logout() {\r\n//       localStorage.removeItem('token');\r\n//       this.$router.push('/'); // redirect to the login page\r\n//     }\r\n//   }\r\n// }\r\n// import * as THREE from 'three';\r\n\r\nimport LoginView from '@/components/LoginView.vue';\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isLargeScreen: true,\r\n      hideBottomNav: false,\r\n      scrollTimer: null,\r\n      prevScrollY: 0,\r\n      showLoginModal: false,\r\n      confirmationModalIndex: null,\r\n      map: null,\r\n      locations: [],\r\n      data: [\r\n          { service: 'Service 1', date: 'Date 1', location: 'Location 1', volunteers: 'Volunteers 1' },\r\n          // add more data as needed...\r\n      ],\r\n      viewModalIndex: null,\r\n      signupModalIndex: null,\r\n      isMenuOpen: false,\r\n    };\r\n  },\r\ncreated() {\r\n    fetch('http://localhost:8000/api/current-user/', {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Token ${this.userToken}`  // Pass the user's auth token\r\n        },\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        this.userID = data.id;\r\n        console.log(this.userID);\r\n    })\r\n    .catch(error => console.error('Error:', error));\r\n},\r\n\r\n\r\n\r\n  mounted() {\r\n  this.$nextTick(() => {\r\n    window.initMap = this.initMap;\r\n    this.initMap();\r\n  });\r\n    window.addEventListener('resize', this.handleScreenResize);\r\n    this.handleScreenResize();\r\n    window.addEventListener('scroll', this.handleScroll);\r\n\r\n    // Fetch locations from the API\r\n    fetch('http://localhost:8000/api/locations/')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        // Save the locations in your component's data\r\n        this.locations = data;\r\n        // Add markers to the map for each location\r\n        this.locations.forEach(location => {\r\n          new google.maps.Marker({\r\n            position: { lat: location.latitude, lng: location.longitude },\r\n            map: this.map,\r\n          });\r\n        });\r\n      });\r\n\r\n\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener('resize', this.handleScreenResize);\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n  },\r\n  methods: {\r\n    initMap() {\r\n      this.map = new google.maps.Map(document.getElementById('map'), {\r\n        center: {lat: 32.7767, lng: -96.7970},\r\n        zoom: 8\r\n      });\r\n    },\r\n    getCurrentLocations(){\r\n      // Fetch locations from the API\r\n      fetch('http://localhost:8000/api/locations/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          // Save the locations in your component's data\r\n          this.locations = data;\r\n          // Add markers to the map for each location\r\n          this.locations.forEach(location => {\r\n            new google.maps.Marker({\r\n              position: { lat: location.latitude, lng: location.longitude },\r\n              map: this.map,\r\n            });\r\n          });\r\n        });\r\n    },\r\n    logout() {\r\n      localStorage.removeItem('token');\r\n      this.$router.push('/'); // redirect to the login page\r\n    },\r\n    handleScreenResize() {\r\n      this.isLargeScreen = window.innerWidth >= 768;\r\n      this.hideBottomNav = window.innerWidth >= 768;\r\n    },\r\n    handleScroll() {\r\n      clearTimeout(this.scrollTimer);\r\n\r\n      if (window.pageYOffset > this.prevScrollY || window.innerWidth >= 768) {\r\n        // Scrolling down\r\n        this.hideBottomNav = true;\r\n      } else {\r\n        // Scrolling up\r\n        this.hideBottomNav = false;\r\n      }\r\n\r\n      this.prevScrollY = window.pageYOffset;\r\n\r\n      // Set a timeout to hide the bottom nav after 5 seconds of scroll inactivity\r\n      this.scrollTimer = setTimeout(() => {\r\n        this.hideBottomNav = true;\r\n      }, 5000);\r\n    },\r\n    openLoginModal() {\r\n      this.showLoginModal = true;\r\n    },\r\n    closeLoginModal() {\r\n      this.showLoginModal = false;\r\n    },\r\n    openViewModal(index) {\r\n        this.viewModalIndex = index;\r\n    },\r\n    closeViewModal() {\r\n        this.viewModalIndex = null;\r\n    },\r\n    openSignupModal(index) {\r\n        this.signupModalIndex = index;\r\n    },\r\n    closeSignupModal() {\r\n        this.signupModalIndex = null;\r\n    },\r\n    confirmService(index) {\r\n      this.confirmationModalIndex = index;\r\n      this.closeSignupModal();\r\n    },\r\n    closeConfirmationModal() {\r\n      this.confirmationModalIndex = null;\r\n    },\r\n\r\nsignupForLocation(index) {\r\n    const location = this.locations[index];\r\n    console.log(location);\r\n    fetch(`http://localhost:8000/api/locations/${location.id}/`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n            ...location,\r\n            volunteers: location.volunteers + 1,\r\n        }),\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        if (data.status === 'success') {\r\n            const updatedLocation = data.location;\r\n            this.locations.splice(index, 1, updatedLocation);\r\n            this.signupForService(index);\r\n            // close the signup modal\r\n            this.closeSignupModal();\r\n            // open the confirmation modal\r\n            this.confirmService(index);\r\n        } else {\r\n            console.error('Error:', data.error);\r\n        }\r\n    })\r\n    .catch(error => console.error('Error:', error));\r\n},\r\nsignupForService(index) {\r\n    const location = this.locations[index];\r\n    console.log(\"HERE \" + JSON.stringify(location.id));\r\n\r\n    fetch('http://localhost:8000/api/servicesignup/', {  // Adjust the URL as necessary\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Token ${this.userToken}`  // Pass the user's auth token\r\n        },\r\n        body: JSON.stringify({\r\n            user: this.userID,  // Pass the user's ID\r\n            service: location // Pass the ID of the service the user is signing up for\r\n        }),\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        // Handle the response data as necessary\r\n         console.log(data);\r\n    })\r\n    .catch(error => console.error('Error:', error));\r\n}\r\n\r\n\r\n  },\r\n  components: {\r\n    LoginView,\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\nhtml,\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n.dropdown-menu {\r\n  display: none;\r\n  flex-direction: column;\r\n  position: absolute;\r\n  background-color: white;\r\n}\r\n\r\n.dropdown-item {\r\n  padding: 1rem;\r\n}\r\n\r\n.mobile-nav {\r\n  display: none;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n  .desktop-nav {\r\n    display: none;\r\n  }\r\n  .dropdown-menu {\r\n    display: flex;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 900px) {\r\n  .desktop-nav {\r\n    display: flex;\r\n  }\r\n  .mobile-nav {\r\n    display: none;\r\n  }\r\n}\r\n.styled-table {\r\n    border-collapse: collapse;\r\n    margin: 25px 0;\r\n    font-size: 0.9em;\r\n    font-family: sans-serif;\r\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);\r\n    width: 100%;\r\n    background-color: #f0fdf4;\r\n    overflow-x: auto;\r\n}\r\n.styled-table thead tr {\r\n    background-color: #009879;\r\n    color: #ffffff;\r\n    text-align: left;\r\n}\r\n.styled-table th,\r\n.styled-table td {\r\n    padding: 12px 15px;\r\n    border-left: 1px solid #009879;\r\n    border-right: 1px solid #009879;\r\n}\r\n.styled-table tbody tr {\r\n    border-bottom: 2px solid #dddddd;\r\n}\r\n\r\n.styled-table tbody tr:nth-of-type(even) {\r\n    background-color: #f3f3f3;\r\n}\r\n\r\n.styled-table tbody tr:nth-of-type(odd) {\r\n    background-color: #E5EFF7;\r\n}\r\n\r\n.styled-table tbody tr:last-of-type {\r\n    border-bottom: 4px solid #009879;\r\n}\r\n\r\n.styled-table tbody tr.active-row {\r\n    font-weight: bold;\r\n    color: #009879;\r\n}\r\n\r\n.styled-table tbody tr:nth-of-type(even):hover {\r\n    color: #009879;\r\n    transform: scale(1.02);\r\n    transition: all 0.3s ease;\r\n    border-color: white; /* Customize the border color on hover */\r\n  }\r\n\r\n.styled-table tbody tr:nth-of-type(odd):hover {\r\n    color: #009879;\r\n    transform: scale(1.02);\r\n    transition: all 0.3s ease;\r\n    border-color: white; /* Customize the border color on hover */\r\n\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n    .styled-table {\r\n        display: block;\r\n    }\r\n    .styled-table thead {\r\n        display: block;\r\n    }\r\n    .styled-table tbody {\r\n        display: block;\r\n    }\r\n    .styled-table thead tr {\r\n        box-sizing: border-box;\r\n        display: block;\r\n        position: absolute;\r\n        top: -9999px;\r\n        left: -9999px;\r\n    }\r\n    .styled-table tr {\r\n        display: block;\r\n        margin-bottom: 0rem;\r\n        \r\n    }\r\n    .styled-table td {\r\n        display: block;\r\n        font-size: .8em;\r\n        line-height: 1.5em;\r\n        text-align: right;\r\n    }\r\n\r\n    .styled-table tbody tr:hover {\r\n      color: #009879;\r\n      transform: scale(1.00);\r\n      transition: all 0.3s ease;\r\n    }\r\n    .styled-table td::before {\r\n        content: attr(data-label);\r\n        float: left;\r\n        font-weight: bold;\r\n        text-transform: uppercase;\r\n    }\r\n    .styled-table th,\r\n    .styled-table td {\r\n        padding: 12px 15px;\r\n        border-left: .01rem solid #009879;\r\n        border-right: .01rem solid #009879;\r\n    }\r\n}\r\n.main-bg{\r\n  /* background: #9ac3fa; */\r\n  background-color: #e6ffff;\r\n}\r\n\r\n.nav{\r\n  background: #2F74AF; \r\n}\r\n.side-nav{\r\n  background-image: linear-gradient(to top, #5193CD 50%, #2F74AF);\r\n}\r\n.bottom-nav{\r\n  background-color: #5193CD; \r\n}\r\n.side-nav-bg-overflow{\r\n  background-color: #5193CD; \r\n}\r\n\r\n\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}